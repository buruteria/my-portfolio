<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tetsuhiro Ishida - Portfolio</title>
    <style>
        /* --- 全体のデザインとフォント設定 --- */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Lora:wght@400;500&display=swap');

        :root {
            --bg-color: #F8F7F2;
            --text-color: #1a1a1a;
            --accent-color: #333;
            --border-color: #e5e5e5;
            --sidebar-width: 220px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
        }

        h1, h2, h3 {
            font-family: 'Lora', serif;
            font-weight: 500;
        }
        
        a {
            color: var(--text-color);
            text-decoration: none;
        }

        /* --- サイドバー --- */
        .sidebar {
            width: var(--sidebar-width);
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            background-color: var(--bg-color);
            border-right: 1px solid var(--border-color);
            padding: 40px;
            display: flex;
            flex-direction: column;
            z-index: 1001;
        }
        .sidebar .logo {
            font-family: 'Lora', serif;
            font-size: 22px;
            font-weight: 500;
            line-height: 1.4;
            margin-bottom: 60px;
            color: var(--accent-color);
        }
        .sidebar nav {
            flex-grow: 1;
        }
        .sidebar nav ul {
            list-style: none;
        }
        .sidebar nav li {
            margin-bottom: 20px;
        }
        .sidebar nav a {
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
        }
        .sidebar nav a.active {
            text-decoration: underline;
        }
        .sidebar footer {
            font-size: 12px;
            color: #aaa;
        }

        /* --- メインコンテンツ --- */
        .main-content {
            margin-left: var(--sidebar-width);
            width: calc(100% - var(--sidebar-width));
            padding: 60px;
        }
        
        .page-section {
            display: none;
        }
        .page-section.active {
            display: block;
        }

        /* --- ハンバーガーメニュー --- */
        .hamburger-btn {
            display: none; /* PCでは非表示 */
            position: fixed;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background: none;
            border: none;
            z-index: 1002;
            cursor: pointer;
        }
        .hamburger-btn span {
            display: block;
            width: 24px;
            height: 2px;
            background-color: var(--accent-color);
            margin: 5px auto;
            transition: all 0.3s;
        }

        .section-title {
            font-size: 36px;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 15px;
        }
        .view-all-button {
            display: inline-block;
            padding: 10px 20px;
            border: 1px solid var(--accent-color);
            margin-top: 30px;
            transition: all 0.2s;
            border-radius: 999px;
        }
        .view-all-button:hover {
            background-color: var(--accent-color);
            color: var(--bg-color);
        }

        .main-visual {
            width: 100%;
            height: 60vh;
            background-color: #ccc;
            margin-bottom: 60px;
            background-image: url('https://images.unsplash.com/photo-1519389950473-47ba0277781c?q=80&w=2940&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            border-radius: 16px;
        }
        .intro-text {
            max-width: 720px;
            margin: 0 auto 60px auto;
            font-size: 16px;
            line-height: 1.8;
        }
        .intro-text p {
            margin-bottom: 1.5em;
        }
        
        .about-me {
            display: flex;
            gap: 40px;
            align-items: center;
            margin-top: 60px;
            background: #fff;
            padding: 40px;
            border-radius: 16px;
        }
        .about-me .photo {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background-color: #ccc;
            flex-shrink: 0;
            background-image: url('https://images.unsplash.com/photo-1531123414780-f74242c2b052?q=80&w=2787&auto=format&fit=crop');
            background-size: cover;
        }
        .social-links {
            display: flex;
            gap: 20px;
            margin-top: 60px;
            justify-content: center;
        }
        .social-links svg {
            width: 24px;
            height: 24px;
            fill: #777;
            transition: fill 0.2s;
        }
        .social-links a:hover svg {
            fill: var(--text-color);
        }
        
        .grid-container {
            display: grid;
            gap: 30px;
            min-height: 200px;
        }
        .grid-3-col {
            grid-template-columns: repeat(3, 1fr);
        }
        .grid-2-col {
            grid-template-columns: repeat(2, 1fr);
        }
        .grid-4-col {
            grid-template-columns: repeat(4, 1fr);
        }
        .card {
            background-color: #fff;
            border: 1px solid var(--border-color);
            border-radius: 16px;
            transition: box-shadow 0.3s, transform 0.3s;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.08);
        }
        .card-image {
            width: 100%;
            padding-top: 56.25%;
            background-size: cover;
            background-position: center;
        }
        .card-content {
            padding: 20px 24px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        .card-media {
            font-size: 12px;
            font-weight: 500;
            color: #888;
            margin-bottom: 8px;
        }
        .card-title {
            font-size: 20px;
            font-weight: 500;
            line-height: 1.4;
            margin-bottom: 12px;
            flex-grow: 1;
        }
        .card-tags {
            font-size: 12px;
            color: #777;
        }
        .project-card {
            cursor: pointer;
        }
        .project-card-image {
            width: 100%;
            height: 200px;
            background-color: #7a7a7a;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: 500;
            text-align: center;
            padding: 20px;
            line-height: 1.3;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            overflow: hidden;
            position: relative;
        }
        .project-card-image.loading {
            background-color: #f0f0f0;
            color: #888;
            font-size: 14px;
        }
        .project-card-content {
            padding: 16px 20px;
        }
        .project-card-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 8px;
        }
        .project-card-role {
            font-size: 13px;
            color: #777;
        }
        
        .article-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 30px;
        }
        .tab-button {
            padding: 8px 20px;
            border: 1px solid var(--border-color);
            background-color: transparent;
            color: var(--accent-color);
            cursor: pointer;
            border-radius: 999px;
            font-weight: 500;
            transition: all 0.2s;
        }
        .tab-button:hover {
            border-color: var(--accent-color);
        }
        .tab-button.active {
            background-color: var(--accent-color);
            color: var(--bg-color);
            border-color: var(--accent-color);
        }

        .contact-form {
            max-width: 600px;
            margin: 0 auto;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 16px;
        }
        .form-group textarea {
            min-height: 150px;
        }
        .submit-button {
            padding: 12px 24px;
            border: none;
            background-color: var(--accent-color);
            color: var(--bg-color);
            font-size: 16px;
            cursor: pointer;
            transition: opacity 0.2s;
        }
        .submit-button:hover {
            opacity: 0.8;
        }
        .contact-email {
            text-align: center;
            margin-top: 40px;
            color: #777;
        }
        .contact-email a {
            color: var(--accent-color);
            text-decoration: underline;
        }

        /* --- Project Modal Styles (Restored) --- */
        .project-modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.6);
            display: flex; justify-content: center; align-items: center;
            z-index: 1000;
            opacity: 0; visibility: hidden; transition: all 0.3s;
        }
        .project-modal-overlay.active {
            opacity: 1; visibility: visible;
        }
        .project-modal {
            width: 85%; max-width: 800px; max-height: 90vh;
            background-color: var(--bg-color);
            border-radius: 16px;
            display: flex; flex-direction: column;
            transform: scale(0.95); transition: transform 0.3s;
            margin: 0 auto;
        }
        .project-modal-overlay.active .project-modal {
            transform: scale(1);
        }
        .project-modal-header {
            padding: 25px 50px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }
        .project-modal-header h2 {
            font-size: 28px;
            margin: 0;
            font-family: 'Lora', serif;
            font-weight: 600;
        }
        .project-modal-close {
            font-size: 30px;
            cursor: pointer;
            color: #aaa;
            line-height: 1;
        }
        .project-modal-close:hover {
            color: var(--text-color);
        }
        .project-modal-body {
            padding: 40px 60px;
            overflow-y: auto;
            max-width: 100%;
            margin: 0 auto;
        }
        
        /* --- Modal Content Styles --- */
        .detail-item {
            margin-bottom: 30px;
        }
        .detail-item strong {
            display: block;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--accent-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 8px;
        }
        .detail-item p {
            line-height: 1.7;
            margin-bottom: 1em;
        }
        .detail-item div {
            line-height: 1.8;
        }
        
        /* --- OGP Card Styles (Restored) --- */
        #ogp-card-container {
            margin-bottom: 35px;
        }
        .ogp-card {
            display: flex;
            flex-direction: column;
            border: 1px solid #e1e4e8;
            border-radius: 12px;
            overflow: hidden;
            text-decoration: none;
            color: inherit;
            background-color: #fff;
            transition: box-shadow 0.2s;
            max-width: 100%;
        }
        .ogp-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }
        .ogp-card-image {
            width: 100%;
            max-height: 400px;
            background-color: #f6f8fa;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        .ogp-card-image img {
            width: 100%;
            height: auto;
            object-fit: contain;
        }
        .ogp-card-info {
            padding: 20px 24px;
        }
        .ogp-card-description {
            font-size: 15px;
            color: #586069;
            line-height: 1.6;
            margin-bottom: 16px;
            font-family: 'Inter', sans-serif;
        }
        .ogp-card-url {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: #888;
        }
        .ogp-card-url img {
            width: 16px;
            height: 16px;
            flex-shrink: 0;
        }

        /* --- ▼ カード内タグ用のスタイルを追加 ▼ --- */
.card-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: auto; /* タグをカード下部に配置 */
    padding-top: 12px;
}
.card-tag-pill {
    display: inline-block;
    padding: 4px 10px;
    font-size: 11px;
    font-weight: 500;
    background-color: #f0f0f0;
    color: #555;
    border-radius: 999px;
}

        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease-in-out;
            }
            .sidebar.is-open {
                transform: translateX(0);
                box-shadow: 5px 0 15px rgba(0,0,0,0.1);
            }
            .main-content {
                margin-left: 0;
                width: 100%;
            }
            .hamburger-btn {
                display: block;
            }
            .grid-3-col, .grid-2-col, .grid-4-col {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        @media (max-width: 768px) {
            .grid-3-col, .grid-2-col, .grid-4-col { grid-template-columns: 1fr; }
            .project-modal { 
                width: 95%; 
                max-width: none;
            }
            .project-modal-body {
                padding: 30px 25px;
            }
            .project-modal-header {
                padding: 20px 25px;
            }
            .main-content { 
                padding: 30px 20px; 
            }
        }

        /* --- About Page --- */
        .about-content {
            max-width: 800px;
            margin: 40px auto;
        }
        .about-me-detailed {
            display: flex;
            gap: 50px;
            align-items: flex-start;
        }
        .about-photo {
            width: 180px;
            height: 220px;
            border-radius: 8px;
            background-color: #ccc;
            flex-shrink: 0;
            background-image: url('https://images.unsplash.com/photo-1531123414780-f74242c2b052?q=80&w=2787&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            margin-top: 10px;
        }
        .about-text {
            line-height: 1.9;
        }
        .about-text h3 {
            font-size: 28px;
            margin-bottom: 20px;
        }
        .about-text h4 {
            font-size: 20px;
            margin-top: 40px;
            margin-bottom: 15px;
            border-left: 3px solid var(--accent-color);
            padding-left: 10px;
        }
        .about-text p {
            margin-bottom: 1.5em;
        }
        .about-text ul {
            list-style: none;
            padding-left: 0;
        }
        .about-text li {
            margin-bottom: 0.8em;
            padding-left: 1.4em;
            position: relative;
        }
        .about-text li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: var(--accent-color);
            font-weight: bold;
        }
    </style>
</head>
<body>

    <button id="hamburger-btn" class="hamburger-btn">
        <span></span>
        <span></span>
        <span></span>
    </button>
    
    <aside class="sidebar" id="sidebar">
        <div>
            <h1 class="logo">Tetsuhiro<br>Ishida</h1>
            <nav>
                <ul id="navigation">
                    <li><a href="#top" class="nav-link active">TOP</a></li>
                    <li><a href="#about" class="nav-link">ABOUT</a></li>
                    <li><a href="#articles" class="nav-link">ARTICLES</a></li>
                    <li><a href="#projects" class="nav-link">PROJECTS</a></li>
                    <li><a href="#contact" class="nav-link">CONTACT</a></li>
                </ul>
            </nav>
        </div>
        <footer>© 2025 Tetsuhiro Ishida</footer>
    </aside>

    <main class="main-content">
        <section id="top" class="page-section active">
            <div class="main-visual"></div>
            <div class="intro-text">
                <h3 style="font-size: 28px; text-align: center; margin-bottom: 20px;">言葉を編み、未来を構想する。</h3>
                <p>編集者・石田哲大のポートフォリオサイトです。事業やサービスのコンセプト設計から、インタビュー、執筆、メディア戦略まで、言葉を軸にした課題解決を支援します。</p>
            </div>
            <h2 class="section-title">Articles</h2>
            <div id="top-articles-grid" class="grid-container grid-3-col"></div>
            <a href="#articles" class="view-all-button nav-link">View All</a>
            <h2 class="section-title" style="margin-top: 60px;">Projects</h2>
            <div id="top-projects-grid" class="grid-container grid-4-col"></div>
            <a href="#projects" class="view-all-button nav-link">View All</a>
            <div class="about-me">
                <div class="photo"></div>
                <div>
                    <h3>About Me</h3>
                    <p>このポートフォリオサイトは、私の活動と考え方を記録するためのものです。より詳細な自己紹介はABOUTページをご覧ください。</p>
                </div>
            </div>
            <div class="social-links">
                 <a href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a>
                <a href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-4.48 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z"></path></svg></a>
                <a href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.012 3.584-.07 4.85c-.148 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.85s.012-3.584.07-4.85c.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.85-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.667-.014 4.947-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.947s-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.689-.073-4.948-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44 1.441-.645 1.441-1.44-.645-1.44-1.441-1.44z"></path></svg></a>
            </div>
        </section>

        <section id="about" class="page-section">
            <h2 class="section-title">About</h2>
            <div class="about-content">
                <div class="about-me-detailed">
                    <div class="about-photo"></div>
                    <div class="about-text">
                        <h3>石田 哲大 / Tetsuhiro Ishida</h3>
                        <p>個人事業主の編集者です。起業家、デザイナー、研究者へのインタビューや、抽象度が高い概念の言語化（コンセプトエディティング）を軸に、企業やクリエイターの課題解決を支援しています。</p>
                        <p>いわゆる"編集者"と聞くと、メディア記事や書籍制作が仕事というイメージがありますが、実際は法人運営から事業立ち上げ、未来に向けた経営コンセプトの言語化まで幅広いご相談があります。</p>
                        
                        <h4>Service</h4>
                        <p>コンセプト設計やブランディング、新規事業への伴走といった案件を中心に取り組んでいます。BTCA（ビジネス／テクノロジー／クリエイティブ／アカデミック）領域を横断して先端トピックを把握し、実装まで見据えて並走するスタイルを大切にしています。</p>
                        <ul>
                            <li><strong>コンセプトエディティング</strong>: 事業、サービス、組織のビジョン・ミッション・バリューの言語化支援</li>
                            <li><strong>インタビュー・執筆</strong>: 起業家、デザイナー、研究者など、専門家の思考や哲学を深く引き出す取材と記事制作</li>
                            <li><strong>メディア戦略</strong>: オウンドメディアの立ち上げ、コンテンツ企画、編集体制の構築</li>
                            <li><strong>事業開発支援</strong>: 新規事業の壁打ち、コンセプト検証、資料作成サポート</li>
                        </ul>

                        <h4>Profile</h4>
                        <p>1991年生まれ。編集者。新卒でITメガベンチャーに入社し、BtoBマーケティングに従事。その後、ドローンスタートアップに創業メンバーとして参画し、事業開発を担当。ハードウェアの製造・販売から、SaaSプロダクトの開発・セールスまで、職能を限定せず幅広く経験。2024年に独立。「正解のない問いに対して筋道を立て、情報と人を巻き込みながら形にしていく」という事業開発の経験を核に、実装まで見据えた編集を得意とする。</p>
                        
                        <h4>SNS</h4>
                        <div class="social-links" style="justify-content: flex-start; margin-top: 20px; margin-bottom: 20px;">
                            <a href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a>
                            <a href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-4.48 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z"></path></svg></a>
                            <a href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.012 3.584-.07 4.85c-.148 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.85s.012-3.584.07-4.85c.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.85-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.667-.014 4.947-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.947s-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.689-.073-4.948-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44 1.441-.645 1.441-1.44-.645-1.44-1.441-1.44z"></path></svg></a>
                        </div>

                        <h4>Column</h4>
                        <p>執筆した記事や、登壇資料などをまとめています。</p>
                        <a href="#articles" class="view-all-button nav-link">View All Articles</a>

                    </div>
                </div>
            </div>
        </section>

        <section id="articles" class="page-section">
            <h2 class="section-title">Articles</h2>
            <div id="article-tabs" class="article-tabs">
                <button class="tab-button" data-category="Design">Design</button>
                <button class="tab-button" data-category="Academic">Academic</button>
                <button class="tab-button" data-category="Biz/Tech">Biz/Tech</button>
                <button class="tab-button" data-category="Creative">Creative</button>
            </div>
            <div id="articles-grid" class="grid-container grid-3-col"></div>
        </section>
        
        <section id="projects" class="page-section">
            <h2 class="section-title">Projects</h2>
            <div id="projects-grid" class="grid-container grid-4-col"></div>
        </section>

        <section id="contact" class="page-section">
            <h2 class="section-title">Contact</h2>
            <div class="contact-form">
                <p style="margin-bottom: 20px;">ご依頼やご相談はこちらのフォームからお気軽にご連絡ください。</p>
                <form action="https://formspree.io/f/YOUR_UNIQUE_CODE" method="POST">
                    <div class="form-group">
                        <label for="name">お名前</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="email">メールアドレス</label>
                        <input type="email" id="email" name="_replyto" required>
                    </div>
                    <div class="form-group">
                        <label for="message">依頼内容</label>
                        <textarea id="message" name="message" required></textarea>
                    </div>
                    <button type="submit" class="submit-button">送信</button>
                </form>
                <p class="contact-email">あるいは、<a href="mailto:tetsu2626@gmail.com">こちらのメールアドレス</a>宛にご連絡ください。</p>
            </div>
        </section>
    </main>
    
    <div id="project-modal-overlay" class="project-modal-overlay">
        <div id="project-modal-content" class="project-modal"></div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        const ARTICLES_DATABASE_ID = '202fc6b604188067baedcd752b1bb428';
        const PROJECTS_DATABASE_ID = '213fc6b60418809abd4bfb8fe911629a';
        
        const PROP_NAMES = {
            article: {
                category: 'Content Category',
                title: 'Title',
                image: 'OGP Image',
                url: 'URL',
                role: 'Role',
                media: 'Media',
                featured: 'Featured',
                priority: 'Priority'
            },
            project: {
                title: 'プロジェクト名',
                image: '添付画像',
                category: '担当役割',
                description: 'プロジェクト概要',
                client: '取引先',
                period: '制作期間',
                summary: 'サマリ',
                url: '関連URL',
                otherImages: 'その他画像',
                status: '公開状態',
                order: '表示順',
                relatedArticles: '関連記事'
            }
        };

        const pageElements = {
            navLinks: document.querySelectorAll('.nav-link'),
            pageSections: document.querySelectorAll('.page-section'),
            hamburgerBtn: document.getElementById('hamburger-btn'),
            sidebar: document.getElementById('sidebar'),
            articlesGrid: document.getElementById('articles-grid'),
            topArticlesGrid: document.getElementById('top-articles-grid'),
            projectsGrid: document.getElementById('projects-grid'),
            topProjectsGrid: document.getElementById('top-projects-grid'),
            articleTabs: document.getElementById('article-tabs'),
            projectModalOverlay: document.getElementById('project-modal-overlay'),
            projectModalContent: document.getElementById('project-modal-content'),
        };

        let allArticlesData = [];
        let allProjectsData = [];

        async function callNotionApi(databaseId, filter, sorts) {
            try {
                const response = await fetch('/.netlify/functions/notion', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ databaseId, filter, sorts })
                });
                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(errorText || 'API request failed');
                }
                const responseText = await response.text();
                if (!responseText) {
                    throw new Error('Server returned an empty response.');
                }
                return JSON.parse(responseText);
            } catch (error) {
                console.error('callNotionApi failed:', error);
                throw error;
            }
        }

        function renderArticleCard(container, article) {
            const props = article.properties;
            const title = props[PROP_NAMES.article.title]?.title[0]?.plain_text || 'No Title';
            const imageUrl = props[PROP_NAMES.article.image]?.files[0]?.file?.url || props[PROP_NAMES.article.image]?.files[0]?.external?.url || '';
            const pageUrl = props[PROP_NAMES.article.url]?.url || '#';
            const media = props[PROP_NAMES.article.media]?.rich_text[0]?.plain_text || '';
            
            const roles = props[PROP_NAMES.article.role]?.multi_select || [];
            const tagsHtml = roles.map(tag => `<span class="card-tag-pill">#${tag.name}</span>`).join('');

            const cardHtml = `
                <a href="${pageUrl}" target="_blank" rel="noopener noreferrer" class="card">
                    <div class="card-image" style="background-image: url('${imageUrl}')"></div>
                    <div class="card-content">
                        <p class="card-title">${title}</p>
                        <p class="card-media">${media}</p>
                        <div class="card-tags">${tagsHtml}</div>
                    </div>
                </a>
            `;
            container.insertAdjacentHTML('beforeend', cardHtml);
        }

        function renderArticles(category) {
            const container = pageElements.articlesGrid;
            container.innerHTML = '';
            
            let articlesToRender;

            // Articlesページでは常にカテゴリでフィルタリング
            articlesToRender = allArticlesData.filter(article => {
                const cat = article.properties[PROP_NAMES.article.category]?.select?.name;
                return cat === category;
            });

            if (articlesToRender.length === 0) {
                container.innerHTML = '<p>表示できる記事がありません。</p>';
                return;
            }

            articlesToRender.forEach(article => renderArticleCard(container, article));
        }

        async function fetchAllArticles() {
            const articlesContainer = pageElements.articlesGrid;
            const topArticlesContainer = pageElements.topArticlesGrid;
            articlesContainer.innerHTML = '<p>読み込み中...</p>';
            topArticlesContainer.innerHTML = '<p>読み込み中...</p>';

            // ソート機能を無効化（JavaScriptでPriorityソートするため）
            const sorts = [];

            try {
                const data = await callNotionApi(ARTICLES_DATABASE_ID, null, sorts);
                allArticlesData = data.results;
                
                // Priorityプロパティで昇順ソート（数字の小さい順）
                allArticlesData.sort((a, b) => {
                    const priorityA = a.properties[PROP_NAMES.article.priority]?.number || 999;
                    const priorityB = b.properties[PROP_NAMES.article.priority]?.number || 999;
                    return priorityA - priorityB; // 昇順（Priority順）
                });
                
                // デフォルトカテゴリを 'Design' に設定
                const defaultCategory = 'Design';
                renderArticles(defaultCategory);

                // 対応するタブをアクティブにする
                document.querySelectorAll('.tab-button').forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.dataset.category === defaultCategory) {
                        btn.classList.add('active');
                    }
                });

                topArticlesContainer.innerHTML = '';
                const featuredArticles = allArticlesData
                    .filter(article => article.properties[PROP_NAMES.article.featured]?.checkbox === true)
                    .slice(0, 3);
                
                if (featuredArticles.length > 0) {
                    featuredArticles.forEach(article => renderArticleCard(topArticlesContainer, article));
                } else {
                    topArticlesContainer.innerHTML = '<p>注目の記事はありません。</p>';
                }

            } catch (error) {
                console.error('Articlesの取得に失敗:', error);
                articlesContainer.innerHTML = '<p>記事データの取得に失敗しました。</p>';
                topArticlesContainer.innerHTML = '';
            }
        }
        
        async function fetchAndRenderProjects() {
            const projectsContainer = pageElements.projectsGrid;
            const topProjectsContainer = pageElements.topProjectsGrid;
            projectsContainer.innerHTML = '<p>読み込み中...</p>';
            topProjectsContainer.innerHTML = '<p>読み込み中...</p>';
            
            // 公開状態でフィルタリング（公開のみ表示）
            const filter = {
                property: PROP_NAMES.project.status,
                checkbox: {
                    equals: true
                }
            };
            
            // 表示順でソート
            const sorts = [
                { property: PROP_NAMES.project.order, direction: 'ascending' }
            ];
            
            try {
                const data = await callNotionApi(PROJECTS_DATABASE_ID, filter, sorts);
                allProjectsData = data.results;

                projectsContainer.innerHTML = '';
                topProjectsContainer.innerHTML = '';

                if (allProjectsData.length === 0) {
                     projectsContainer.innerHTML = topProjectsContainer.innerHTML = '<p>表示できるプロジェクトがありません。</p>';
                     return;
                }
                
                allProjectsData.forEach(project => renderProjectCard(projectsContainer, project));
                allProjectsData.slice(0, 4).forEach(project => renderProjectCard(topProjectsContainer, project));

            } catch (error) {
                console.error('Projectsの取得に失敗:', error);
                projectsContainer.innerHTML = topProjectsContainer.innerHTML = `<p>プロジェクトデータの取得に失敗しました。データベースID等を確認してください。</p>`;
            }
        }
        
        async function fetchOgpImageForCard(url, cardElement) {
            const imageDiv = cardElement.querySelector('.project-card-image');
            if (!imageDiv) return;

            try {
                const response = await fetch('/.netlify/functions/ogp-fetcher', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url })
                });

                if (!response.ok) throw new Error('Response not OK');
                const data = await response.json();

                if (data.image) {
                    imageDiv.style.backgroundImage = `url('${data.image}')`;
                    imageDiv.style.backgroundSize = 'cover';
                    imageDiv.style.backgroundPosition = 'center';
                    imageDiv.style.backgroundRepeat = 'no-repeat';
                    imageDiv.style.color = 'transparent'; // 文字を透明にして画像を表示
                    imageDiv.textContent = ''; // テキストを削除
                } else {
                    // OGP画像がない場合はタイトルを表示
                    imageDiv.textContent = data.title || imageDiv.textContent;
                    imageDiv.classList.remove('loading');
                }
            } catch (error) {
                console.error('Error fetching OGP image for card:', error);
                imageDiv.classList.remove('loading');
            }
        }

        function renderProjectCard(container, project) {
             const props = project.properties;
             const title = props[PROP_NAMES.project.title]?.title[0]?.plain_text || 'No Title';
             const client = props[PROP_NAMES.project.client]?.rich_text.map(t => t.plain_text).join('') || '';
             const category = props[PROP_NAMES.project.category]?.select?.name || '';
             const relatedUrl = props[PROP_NAMES.project.url]?.url || '';
             
             const cardHtml = `
                <div class="card project-card" data-project-id="${project.id}">
                    <div class="project-card-image loading">${relatedUrl ? '読み込み中...' : (client || 'Client')}</div>
                    <div class="project-card-content">
                        <p class="project-card-title">${title}</p>
                        <p class="project-card-role">${category}</p>
                    </div>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', cardHtml);
            
            // OGP画像を非同期で取得
            if (relatedUrl) {
                const cardElement = container.lastElementChild;
                fetchOgpImageForCard(relatedUrl, cardElement);
            }
        }
        
        function formatText(text) {
            return text.replace(/\n/g, '<br>');
        }

        function openProjectModal(projectId) {
            const project = allProjectsData.find(p => p.id === projectId);
            if (!project) return;
            
            const props = project.properties;
            const title = props[PROP_NAMES.project.title]?.title[0]?.plain_text || 'No Title';
            const description = props[PROP_NAMES.project.description]?.rich_text.map(t => t.plain_text).join('') || '';
            const summary = props[PROP_NAMES.project.summary]?.rich_text.map(t => t.plain_text).join('') || '';
            const client = props[PROP_NAMES.project.client]?.rich_text.map(t => t.plain_text).join('') || '';
            const period = props[PROP_NAMES.project.period]?.rich_text.map(t => t.plain_text).join('') || '';
            const role = props[PROP_NAMES.project.category]?.select?.name || '';
            const relatedUrl = props[PROP_NAMES.project.url]?.url || '';

            const modalHtml = `
                <div class="project-modal-header">
                    <h2>${title}</h2>
                    <span class="project-modal-close">&times;</span>
                </div>
                <div class="project-modal-body">
                    <div id="ogp-card-container"></div>
                    
                    ${summary ? `<div class="detail-item"><strong>サマリ</strong><div>${formatText(summary)}</div></div>` : ''}
                    ${description ? `<div class="detail-item"><strong>プロジェクト概要</strong><div>${formatText(description)}</div></div>` : ''}
                    ${client ? `<div class="detail-item"><strong>取引先</strong><p>${client}</p></div>` : ''}
                    ${role ? `<div class="detail-item"><strong>担当役割</strong><p>${role}</p></div>` : ''}
                    ${period ? `<div class="detail-item"><strong>制作期間</strong><p>${period}</p></div>` : ''}
                </div>
            `;

            pageElements.projectModalContent.innerHTML = modalHtml;
            pageElements.projectModalOverlay.classList.add('active');
            
            if (relatedUrl) {
                fetchOgpData(relatedUrl);
            } else {
                const ogpContainer = document.getElementById('ogp-card-container');
                if (ogpContainer) ogpContainer.style.display = 'none';
            }

            pageElements.projectModalContent.querySelector('.project-modal-close').addEventListener('click', closeProjectModal);
        }

        async function fetchOgpData(url) {
            const container = document.getElementById('ogp-card-container');
            if (!container) return;
            container.innerHTML = '<p style="font-size: 14px; color: #888;">関連リンクを読み込んでいます...</p>';

            try {
                const response = await fetch('/.netlify/functions/ogp-fetcher', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url })
                });

                if (!response.ok) throw new Error('Response not OK');
                const data = await response.json();

                if (!data.title) {
                    throw new Error('No OGP data found');
                }

                const imageHtml = data.image ? `
                    <div class="ogp-card-image">
                        <img src="${data.image}" alt="OGP Image" onerror="this.parentElement.style.display='none'">
                    </div>` : '';

                container.innerHTML = `
                    <a href="${url}" target="_blank" rel="noopener noreferrer" class="ogp-card">
                        ${imageHtml}
                        <div class="ogp-card-info">
                            <div class="ogp-card-description">${data.description}</div>
                            <div class="ogp-card-url">
                                ${data.favicon ? `<img src="${data.favicon}" alt="" onerror="this.style.display='none'">` : ''}
                                <span>${data.siteName || new URL(url).hostname}</span>
                            </div>
                        </div>
                    </a>
                `;
            } catch (error) {
                console.error('Error fetching OGP data:', error);
                container.innerHTML = `<div class="detail-item"><strong>関連URL</strong><p><a href="${url}" target="_blank" rel="noopener noreferrer">${url}</a></p></div>`;
            }
        }
        
        function closeProjectModal() {
            pageElements.projectModalOverlay.classList.remove('active');
        }

        function navigateTo(pageId) {
            pageElements.pageSections.forEach(section => section.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            pageElements.navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${pageId}`) {
                    link.classList.add('active');
                }
            });
            window.scrollTo(0, 0);
            pageElements.sidebar.classList.remove('is-open');
        }
        
        function initialLoad() {
            fetchAllArticles();
            fetchAndRenderProjects();
        }
        
        // --- ▼ イベントリスナーの設定（修正版）▼ ---

// ページ内ナビゲーションのリンクがクリックされた時の処理
pageElements.navLinks.forEach(link => {
    link.addEventListener('click', (e) => {
        e.preventDefault();
        const pageId = link.getAttribute('href').substring(1);
        navigateTo(pageId);
    });
});

// Articleページのタブボタンがクリックされた時の処理
pageElements.articleTabs.addEventListener('click', (e) => {
    if (e.target.classList.contains('tab-button')) {
        document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
        e.target.classList.add('active');
        const category = e.target.dataset.category;
        renderArticles(category);
    }
});

// Projectカードがクリックされた時の処理
document.addEventListener('click', (e) => {
    const card = e.target.closest('.project-card');
    if (card) {
        openProjectModal(card.dataset.projectId);
    }
});

// Project詳細モーダルの外側をクリックした時に閉じる処理
pageElements.projectModalOverlay.addEventListener('click', (e) => {
    if (e.target === pageElements.projectModalOverlay) {
        closeProjectModal();
    }
});

// ハンバーガーボタンがクリックされた時の処理
pageElements.hamburgerBtn.addEventListener('click', () => {
    pageElements.sidebar.classList.toggle('is-open');
});

        initialLoad();
    });
    </script>
</body>
</html>
